<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mortgage Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <style>
      body {
        background-color: #e3f4fc;
      }

      .mainbox {
        width: 75%;
        margin: 5% auto;
      }

      .leftside {
        background-color: white;
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
        padding: 3%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .rightside {
        background-color: #133040;
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
        border-bottom-left-radius: 60px;
        padding: 3%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
        color: white;
      }

      .rightside img {
        max-width: 100%;
        height: auto;
      }

      .rightside span {
        display: block;
        margin-top: 20px;
        font-size: 1.2em;
      }

      .mortgage-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .mortgage-header h3 {
        margin: 0;
      }

      .mortgage-header #clearbtn {
        cursor: pointer;
        color: #007bff;
        text-decoration: underline;
      }

      .input-group-text {
        background-color: #e9ecef;
      }

      .input-group {
        margin-bottom: 1rem;
      }

      button {
        background-color: #dadb2f;
        padding: 3%;
      margin-top: 10px;
        color: rgb(67, 62, 86);
        border: none;
        border-radius: 50px;
        width: 60%;
        font-weight: bold;
      }

      .form-check-input {
        margin-right: 10px;
      }

      .form-check-label {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid mainbox">
      <div class="row" style="background-color: white;">
        <div class="col-6 leftside">
          <div class="mortgage-header">
            <h3>Mortgage Calculator</h3>
            <span onclick="clearALL()" id="clearbtn">Clear All</span>
          </div>

          <div class="row">
            <div class="col-12">Mortgage Amount</div>
            <div class="col-12">
              <div class="input-group mb-3">
                <span class="input-group-text">£</span>
                <input
                  id="ma"
                  type="text"
                  class="form-control"
                  aria-label="Amount (to the nearest dollar)"
                />
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="col-12">Mortgage Term</div>
              <div class="col-12">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    aria-label="Number"
                    id="mt"
                  />
                  <span class="input-group-text">years</span>
                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="col-12">Interest Rate</div>
              <div class="col-12">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    aria-label="Decimal Value"
                    id="mr"
                  />
                  <span class="input-group-text">%</span>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">Mortgage Type</div>
            <div class="col-12">
              <div class="form-check">
                <input
                  name="mortgageType"
                  class="form-check-input"
                  type="radio"
                  value="repayment"
                  id="repayment"
                />
                <label class="form-check-label" for="repayment">
                  Repayment
                </label>
              </div>
              <div class="form-check">
                <input
                  name="mortgageType"
                  class="form-check-input"
                  type="radio"
                  value="interest_only"
                  id="interest_only"
                />
                <label class="form-check-label" for="interest_only">
                  Interest Only
                </label>
              </div>
            </div>
          </div>

          <button onclick="calculateMortgage()">
            <i class="bi bi-calculator-fill"></i> Calculate Repayments
          </button>
        </div>
        <div class="col-6 rightside">
          <img src="c6rsl.png" alt="" />
          <span id="monthlyRepayment">Results shown here</span>
          <span id="totalRepayment">
            Complete the form and click "calculate repayments" to see what your
            monthly repayments would be.
          </span>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      function clearALL() {
        document.getElementById("ma").value = "";
        document.getElementById("mt").value = "";
        document.getElementById("mr").value = "";
        const mortgageType = document.querySelector('input[name="mortgageType"]:checked');
        if (mortgageType) mortgageType.checked = false;
        document.getElementById("monthlyRepayment").innerText = "Results shown here";
        document.getElementById("totalRepayment").innerText =
          'Complete the form and click "calculate repayments" to see what your monthly repayments would be.';
      }

      function calculateRepaymentMortgage(ma, mt, annualInterestRate) {
        let n = mt * 12;
        let r = annualInterestRate / 100 / 12;

        let M = (ma * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
        let totalRepayment = M * n;

        return {
          monthlyRepayment: M,
          totalRepayment: totalRepayment,
        };
      }

      function calculateMortgage() {
        let ma = parseFloat(document.getElementById("ma").value);
        let mt = parseInt(document.getElementById("mt").value);
        let mr = parseFloat(document.getElementById("mr").value);
        let mortgageType = document.querySelector('input[name="mortgageType"]:checked').value;

        let result;
        if (mortgageType === "repayment") {
          result = calculateRepaymentMortgage(ma, mt, mr);
        } else {
          // Handle interest-only calculation if needed
        }

        document.getElementById("monthlyRepayment").innerText = `£${result.monthlyRepayment.toFixed(2)}`;
        document.getElementById("totalRepayment").innerText = `£${result.totalRepayment.toFixed(2)}`;
      }
    </script>
  </body>
</html>
